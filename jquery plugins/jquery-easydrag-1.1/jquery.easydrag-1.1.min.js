/*

jQuery easyDrag
drag facile et tactile...
par Gildas P. / www.gildasp.fr

infos, tuto, démos sur 
http://www.gildasp.fr/exp/easydrag/

Testé et approuvé sur Firefox, Safari, Opera, Chrome, IE 10, 9, 8, 7, 6, tablette Android, et iPhone.
Enjoy !

*/
(function(e){function t(){if(easyDrag_Container&&easyDrag_Container.length>0){var e=dragItem.offset();var t=easyDrag_Container.offset();var n=t.left;var r=n+easyDrag_Container.width()-dragItem.innerWidth();n+=parseInt(dragItem.css("margin-left"));if(e.left<n){dragItem.offset({left:n})}else if(e.left>r){dragItem.offset({left:r})}var n=t.top;var r=n+easyDrag_Container.height()-dragItem.innerHeight();n+=parseInt(dragItem.css("margin-top"));if(e.top<n){dragItem.offset({top:n})}else if(e.top>r){dragItem.offset({top:r})}}}e.fn.easyDrag=function(n){n=e.extend({handle:"this",axis:false,container:false,start:function(){},drag:function(){},stop:function(){},cursor:"move"},n);easyDrag_maxZindex=0;if(n.handle=="this"||this.find(n.handle).length==0){handlers=this}else{handlers=this.find(n.handle)}handlers.css("cursor",n.cursor);easyDrag_maxZindex=0;this.each(function(){if(n.handle=="this"||e(this).find(n.handle).length==0){handle=e(this)}else{handle=e(this).find(n.handle)}handle.data("myDragItem",e(this));handle.data("axis",n.axis);handle.data("container",n.container);handle.data("startFunc",n.start);handle.data("dragFunc",n.drag);handle.data("stopFunc",n.stop);if(e(this).css("z-index")!="auto"){easyDrag_maxZindex=Math.max(easyDrag_maxZindex,e(this).css("z-index"))}if(e(this).css("position")=="absolute"||e(this).css("position")=="fixed"){}else{if(e(this).css("left")=="auto"){e(this).css("left","0")}if(e(this).css("top")=="auto"){e(this).css("top","0")}e(this).css("position","relative")}handle.mousedown(function(n){n.preventDefault();dragHandle=e(this);dragItem=e(this).data("myDragItem");initItemX=parseInt(dragItem.css("left"));initItemY=parseInt(dragItem.css("top"));easyDrag_Axis=e(this).data("axis");easyDrag_Container=e(this).data("container");if(easyDrag_Container&&easyDrag_Container.length>0){easydrag_refX=e(this).offset().left;easydrag_refY=e(this).offset().top}dragHandle.data("startFunc").call(dragItem);initEventX=n.pageX;initEventY=n.pageY;e(document).on("mousemove",function(e){e.preventDefault();dragHandle.data("dragFunc").call(dragItem);eventX=e.pageX;eventY=e.pageY;var n=initItemX+eventX-initEventX;var r=initItemY+eventY-initEventY;if(!easyDrag_Axis||easyDrag_Axis=="x"){dragItem.css({left:n+"px"})}if(!easyDrag_Axis||easyDrag_Axis=="y"){dragItem.css({top:r+"px"})}t()});e(document).mouseup(function(){e(document).off("mousemove mouseup");dragHandle.data("stopFunc").call(dragItem)});easyDrag_maxZindex++;dragItem.css("z-index",easyDrag_maxZindex)});handle.on("touchstart",function(n){n.preventDefault();dragHandle=e(this);dragItem=e(this).data("myDragItem");initItemX=parseInt(dragItem.css("left"));initItemY=parseInt(dragItem.css("top"));easyDrag_Axis=e(this).data("axis");easyDrag_Container=e(this).data("container");if(easyDrag_Container&&easyDrag_Container.length>0){easydrag_refX=e(this).offset().left;easydrag_refY=e(this).offset().top}dragHandle.data("startFunc").call(dragItem);touch=n.originalEvent.changedTouches[0];initEventX=touch.pageX;initEventY=touch.pageY;e(document).on("touchmove",function(e){e.preventDefault();dragHandle.data("dragFunc").call(dragItem);touch=e.originalEvent.changedTouches[0];eventX=touch.pageX;eventY=touch.pageY;var n=initItemX+eventX-initEventX;var r=initItemY+eventY-initEventY;if(!easyDrag_Axis||easyDrag_Axis=="x"){dragItem.css({left:n+"px"})}if(!easyDrag_Axis||easyDrag_Axis=="y"){dragItem.css({top:r+"px"})}t()});e(document).on("touchend",function(){e(document).off("touchmove touchend");dragHandle.data("stopFunc").call(dragItem)});easyDrag_maxZindex++;dragItem.css("z-index",easyDrag_maxZindex)})});return this};})(jQuery)